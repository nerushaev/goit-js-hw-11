!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},r={},a=t.parcelRequired7c6;null==a&&((a=function(e){if(e in n)return n[e].exports;if(e in r){var t=r[e];delete r[e];var a={id:e,exports:{}};return n[e]=a,t.call(a.exports,a,a.exports),a.exports}var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,t){r[e]=t},t.parcelRequired7c6=a);var o=a("bpxeT"),i=a("dDDEV"),s=a("2TvXO"),l=a("iU1Pc"),c=a("dIxxU"),u=a("1WSnx");a("5IjG7");var d=a("4Nugj"),p=a("hCAzH"),f=new SimpleLightbox(".gallery a",{captionsData:"alt",captionDelay:250}),g={page:1,per_page:40,q:""},h=0;function y(){var e=window.innerHeight,t=window.scrollY;d.refs.gallery.clientHeight-t<1.3*e&t>e&&(g.page++,w())}function v(e){d.refs.gallery.insertAdjacentHTML("beforeend",(0,p.markUpGallery)(e))}function w(){return b.apply(this,arguments)}function b(){return(b=e(o)(e(s).mark((function t(){var n,r,a,o;return e(s).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=new URLSearchParams(e(i)({},g,{image_type:"photo",orientation:"horizontal",pretty:!0,key:d.api.KEY})),t.prev=1,t.next=4,e(c).get("".concat(d.api.BASE_URL,"?").concat(n));case 4:if(r=t.sent,a=r.data.hits.length,o=r.data.totalHits,!(0===a&1===g.page)){t.next=11;break}return clearInterval(h),e(l).Notify.failure("Sorry, there are no images matching your search query. Please try again."),t.abrupt("return");case 11:return 1===g.page&&e(l).Notify.success("Hooray! We found ".concat(o," images.")),t.next=14,v(r.data.hits);case 14:f.refresh(),d.refs.outputPagesLoad.textContent="".concat((g.page-1)*g.per_page+a," of ").concat(o),g.page*g.per_page>=o&&(console.log("треба виключити інтервал"),clearInterval(h),e(l).Notify.warning("We're sorry, but you've reached the end of search results.")),t.next=22;break;case 19:t.prev=19,t.t0=t.catch(1),console.log(t.t0);case 22:case"end":return t.stop()}}),t,null,[[1,19]])})))).apply(this,arguments)}d.refs.form.addEventListener("submit",(function(e){e.preventDefault(),0!==h&&clearInterval(h);g.page=1,g.q=e.currentTarget.elements.searchQuery.value,d.refs.gallery.innerHTML="",d.refs.outputPagesLoad.textContent="",w(),h=setInterval(y,500)})),window.addEventListener("scroll",(0,u.throttle)((function(){var e=d.refs.buttonPageTop.classList.contains("is-hidden"),t=window.scrollY>=3*window.innerHeight;t&e&&d.refs.buttonPageTop.classList.remove("is-hidden");!t&!e&&d.refs.buttonPageTop.classList.add("is-hidden")}),300)),d.refs.buttonPageTop.addEventListener("click",(function(){window.scroll({top:0,behavior:"smooth"})}))}();
//# sourceMappingURL=task-2.0ca71e2d.js.map
